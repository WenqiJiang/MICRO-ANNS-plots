import matplotlib
import matplotlib.pyplot as plt
import numpy as np

from resource_consumption import draw_resource_consumption_plot

x_labels = []

x_labels = ['1024\nw/ OPQ', \
    '2048', '2048\nw/ OPQ', \
    '4096', '4096\nw/ OPQ', \
    '8192', '8192\nw/ OPQ', \
    '16384', '16384\nw/ OPQ', \
    '32768', '32768\nw/ OPQ', \
    '65536', '65536\nw/ OPQ']

# Stage 1: OPQ
# Stage 2: vector quantizer
# Stage 3: select centroids
# Stage 4: construct distance LUT
# Stage 5: PQ code scan
# Stage 6: collect topK results

resource_utilization_cases = [
    # 1024, OPQ
    [0.5442354828030059, 2.306425466154003, 0.7221160179048416, 4.837929733281368, 49.81272052822606, 41.776572771630725], \
    # 2048
    [0, 2.219980496302929, 1.4818661915518934, 8.141632418842551, 47.945736666205626, 40.210784227096994], \
    # 2048, OPQ
    [0.5237232135471426, 4.396646643096039, 0.6948994201980039, 6.247443594316309, 47.93527598789664, 40.20201114094587], \
    # 4096
    [0, 6.1112581560647286, 1.4260529957755352, 10.526829954965784, 44.56250172085582, 37.37335717233814], \
    # 4096, OPQ
    [0.4822992261943702, 8.058789765565596, 0.8331158840655754, 9.459743512285396, 44.14382620123267, 37.02222541065639], \
    # 8192
    [0, 15.591943111514006, 2.8108976026266697, 11.614343505532892, 38.06159343134904, 31.921222348977402], \
    # 8192, OPQ
    [0.39725708749009564, 18.197771228984028, 2.088551447626425, 12.462095129818247, 36.36009944644477, 30.49422565963645], \
    # 16384
    [0, 25.165773010417002, 3.349049693103477, 13.15517911731477, 31.705958970921998, 26.624039208242746], \
    # 16384, OPQ
    [0.5749738311650796, 38.2897303644366, 3.713783227972377, 14.080179334836679, 23.389393964668194, 19.951939276921067], \
    # 32768
    [0, 54.87457528938384, 7.302683667059323, 17.816336010325454, 10.475092210359202, 9.53131282287219], \
    # 32768, OPQ
    [0.8931361243763437, 59.47738753920716, 6.573714290014747, 15.520315291439474, 9.082984105026831, 8.452462649935434], \
    # 65536
    [0, 62.12803542880375, 9.389006688854034, 14.500009775920725, 7.115829834124518, 6.867118272296979], \
    # 65536, OPQ
    [0.96296521690881, 64.12757678215686, 8.823347789744243, 11.653132053317487, 7.344847151645544, 7.088131006227057]]

y_stage_1 = [r[0] for r in resource_utilization_cases]
y_stage_2 = [r[1] for r in resource_utilization_cases]
y_stage_3 = [r[2] for r in resource_utilization_cases]
y_stage_4 = [r[3] for r in resource_utilization_cases]
y_stage_5 = [r[4] for r in resource_utilization_cases]
y_stage_6 = [r[5] for r in resource_utilization_cases]

draw_resource_consumption_plot(x_labels, y_stage_1, y_stage_2, y_stage_3, y_stage_4, y_stage_5, y_stage_6, 
    'resource_consumption_experiment_2_algorithm_settings', x_tick_rotation=45)

